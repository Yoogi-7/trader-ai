################################################################################
# Trader AI – .env.example
# Skopiuj do .env i uzupełnij sekrety.
################################################################################

##############################################
# --- CORE / API ---
##############################################

# Nazwa aplikacji (wyświetlana w OpenAPI, logach, panelu admin)
APP_NAME=Trader AI API
APP_VERSION=0.1.0
API_PREFIX=/api

# Postgres + Timescale (P1)
DATABASE_URL=postgresql+psycopg2://trader:traderpass@db:5432/traderai

# Redis (cache, kolejki)
REDIS_URL=redis://redis:6379/0

# Kafka / Redpanda (event bus, P8)
KAFKA_BROKERS=redpanda:9092
KAFKA_CLIENT_ID=trader-ai
KAFKA_GROUP_ID=trader-ai-consumers

##############################################
# --- BACKFILL (P3) ---
##############################################

# Giełda i rynek (ccxt)
EXCHANGE=binance
MARKET_TYPE=future        # 'spot' | 'future'

# Symbole do monitorowania
SYMBOLS=BTC/USDT,ETH/USDT,BNB/USDT,ADA/USDT,SOL/USDT,XRP/USDT,DOGE/USDT,MATIC/USDT,ARB/USDT,OP/USDT

# Parametry CCXT
CCXT_LIMIT=1500           # max świec w jednym fetch
RETRY_MAX=5
RETRY_BASE_SEC=1.0

# Parametry backfill
CHUNK_MINUTES=43200       # 30 dni chunk (30*24*60 min)
RESAMPLE_TFS=15m,1h,4h,1d
BACKFILL_MODE=loop        # 'once' | 'loop'
BACKFILL_LOOP_SEC=10
PRINT_PROGRESS_EVERY=20000

##############################################
# --- FEATURE ENGINEERING & LABELING (P4) ---
##############################################

# Wersja zestawu featurów (do śledzenia wersji wektorów)
FEATURES_VERSION=1

# Parametry etykietowania triple-barrier
LABEL_TP_PCT=0.02         # take-profit +2%
LABEL_SL_PCT=0.01         # stop-loss -1%
LABEL_MAX_HORIZON=60      # max horyzont w świecach (np. 60*1m)

##############################################
# --- TRAINING / MODELS (P5–P6) ---
##############################################

# Walk-forward (purge+embargo)
WALK_FORWARD_PURGE=10     # ile świec pominąć między foldami
WALK_FORWARD_EMBARGO=5    # ile świec embargo

# Optuna
OPTUNA_N_TRIALS=50

# Registry
MODEL_REGISTRY_PATH=/data/models

##############################################
# --- SIGNAL ENGINE (P5) ---
##############################################

# Minimalny net profit (≥2%)
MIN_NET_PROFIT=0.02

# Fee & slippage
FEE_MAKER=0.0002
FEE_TAKER=0.0005
SLIPPAGE_BPS=10           # basis points (0.01 = 1bp)

# Funding toggle
FUNDING_ON=1              # 1 = uwzględniaj, 0 = ignoruj

# Confidence threshold
CONFIDENCE_MIN=0.55

# Korelacje i caps
MAX_EXPOSURE_GLOBAL=0.3   # max 30% kapitału
MAX_EXPOSURE_PER_SYMBOL=0.1
MAX_EXPOSURE_BTC_ETH=0.2  # łącznie BTC+ETH ≤ 20%

# Cooldown / kill switch
MAX_CONSECUTIVE_LOSSES=5
COOLDOWN_MINUTES=60

##############################################
# --- USER / SETTINGS (P2) ---
##############################################

# Profile ryzyka
RISK_PROFILE_LOW=0.01     # 1% per trade
RISK_PROFILE_MED=0.02
RISK_PROFILE_HIGH=0.05

# Default user capital (USD)
DEFAULT_CAPITAL=100

##############################################
# --- FRONTEND / WEB (P7) ---
##############################################

# Adres API dla frontendu Next.js
NEXT_PUBLIC_API_URL=http://localhost:8000

##############################################
# --- CI/CD (P9) ---
##############################################

# Docker registry
DOCKER_REGISTRY=myregistry.local
DOCKER_USERNAME=myuser
DOCKER_PASSWORD=mypassword
